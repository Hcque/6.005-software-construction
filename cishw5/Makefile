# DO NOT EDIT THIS FILE

SUBMIT  := src/*.java test/*.java PLAN.txt

EXCLUDE := src/Broadcast.java src/CommandParser.java src/ServerBackend.java src/ServerResponse.java src/ServerMain.java src/ServerModelApi.java test/ChannelsMessagesTest.java test/ConnectionNicknamesTest.java test/InviteOnlyTest.java

JAVA	:= java
JAVAC	:= javac
JUNIT := /home/codio/bin/junit-platform-console-standalone-1.6.1.jar

DEPENDS := src/*.java

TESTS_SRC := \
	test/ChannelsMessagesTest.java \
	test/ConnectionNicknamesTest.java \
	test/InviteOnlyTest.java \
	test/ServerModelTest.java

TESTS := \
	bin/ChannelsMessagesTest.class \
	bin/ConnectionNicknamesTest.class \
	bin/InviteOnlyTest.class \
	bin/ServerModelTest.class

# WKG: temp changed for 20su
HWNAME := hw05
ts := $(shell /bin/date "+%Y-%m-%d-%H:%M:%S")

ZIPNAME := $(HWNAME)-submit($(ts)).zip

.PHONY: all Server clean zip checkstyle test

all:	

bin:
	mkdir bin

Server : $(DEPENDS) bin
	$(JAVAC) -d bin $(DEPENDS)

run% : bin/ServerMain.class
	cd bin && java ServerMain

zip: $(SUBMIT)
	zip '$(ZIPNAME)' $(SUBMIT) -x $(EXCLUDE)

test: $(TESTS_SRC) $(JUNIT) bin 
	$(JAVAC) -d bin -cp $(JUNIT):bin/ $(TESTS_SRC)
	$(JAVA) -jar $(JUNIT) --classpath bin --scan-class-path --disable-banner

checkstyle: ~/bin/checkstyle.sh ~/bin/cis120-checkstyle-config.xml ~/bin/checkstyle-8.12-all.jar
	cd ~/bin && ./checkstyle.sh

clean:
	rm -f src/*.class bin/* test/*.class
	rm -rf *.zip

